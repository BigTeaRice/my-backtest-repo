    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    # 1. 源码安装 TA-Lib（Ubuntu 24.04 通用）
    - name: Build & install TA-Lib from source
      run: |
        sudo apt-get update
        sudo apt-get install -y build-essential wget
        wget http://prdownloads.sourceforge.net/ta-lib/ta-lib-0.4.0-src.tar.gz
        tar -xzf ta-lib-0.4.0-src.tar.gz
        cd ta-lib
        ./configure --prefix=/usr/local
        make && sudo make install
        sudo ldconfig
        cd .. && rm -rf ta-lib*

    # 2. Python 环境
    - name: Setup Python
      uses: actions/setup-python@v5
      with:
        python-version: "3.9"
        cache: 'pip'

    # 3. Python 依赖（含 TA-Lib）
    - name: Install Python dependencies
      run: |
        pip install --upgrade pip
        pip install -r requirements.txt
